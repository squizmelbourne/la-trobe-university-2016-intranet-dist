"use strict";function getClassListString(e){return Array.from(e).reduce(function(e,n){return e+"."+n},"")}function initNavCondensedAccordion(){var e=!1;$(".js-nav-user__acc-trigger").UberAccordion({buttonClass:"nav-user__acc-toggle",onSelect:function(n,t){e=!e,e?$("body").on("click.navcondensed",function(e){var s=getClassListString(e.target.classList),a=getClassListString(n[0].classList),r=getClassListString(t[0].classList),i=""!==s&&n[0].querySelector(s),l=""!==s&&t[0].querySelector(s);i||l||s===a||s===r||$(n).trigger("click")}):$("body").off("click.navcondensed")}})}var navUserMobileHandler={settings:{toggles:["js-nav-user__mobile-toggle","nav-user__close"],nav:"nav-user",activeClasses:{wrapper:"nav-user__slide-out--active",nav:"nav-user--open"}},init:function(){var e=navUserMobileHandler;e.settings.toggles.forEach(function(n){e.setEventHandlers(document.querySelector("."+n))})},setEventHandlers:function(e){var n=navUserMobileHandler;e&&e.addEventListener("click",function(e){e.preventDefault();var t=document.querySelector(e.currentTarget.getAttribute("data-target")),s=t.querySelector("."+n.settings.nav);n.toggleClass(t,n.settings.activeClasses.wrapper),n.toggleClass(s,n.settings.activeClasses.nav)})},toggleClass:function(e,n){e.classList.toggle(n)}},navUserHandler={settings:{el:"",dataURL:"",mobiletoggle:!1},init:function(e,n){navUserHandler.settings.el=e,navUserHandler.settings.dataURL=e.getAttribute("data-userdata-url"),navUserHandler.settings.mobiletoggle=!!e.classList.contains("js-nav-user--mobile-toggle"),navUserHandler.toggleLoadingState(e),$.ajax({url:navUserHandler.settings.dataURL,type:"get",data:{condensedflag:!!navUserHandler.settings.el.classList.contains("nav-user--condensed"),mobiletoggle:navUserHandler.settings.mobiletoggle},success:function(e){navUserHandler.print(e,n)}})},toggleLoadingState:function(e){var n=e.classList;n.contains("nav-user--condensed")?n.toggle("nav-user--condensed-loading"):n.contains("nav-user")&&n.toggle("nav-user--loading")},print:function(e,n){var t=JSON.parse(e),s=document.getElementById("nav-user-slide").querySelector(".nav-user");t.length>1?(s.innerHTML=s.innerHTML+t[0],navUserHandler.settings.el.innerHTML=t[1]):navUserHandler.settings.mobiletoggle?navUserHandler.settings.el.innerHTML=t[0]:(s.innerHTML=s.innerHTML+t[0],navUserHandler.settings.el.innerHTML=t[0]),navUserHandler.toggleLoadingState(navUserHandler.settings.el),n(null)}};!function(){new Promise(function(e,n){navUserHandler.init(document.querySelector(".js-nav-user"),e)}).then(function(){new Promise(function(e,n){navUserHandler.init(document.querySelector(".js-nav-user--mobile-toggle"),e)}).then(function(){document.querySelector("body").classList.add("nav-user-loaded"),initNavCondensedAccordion(),navUserMobileHandler.init()})})}(jQuery);