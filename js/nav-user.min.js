"use strict";var navUserEl=document.querySelector(".js-nav-user"),navUserHandler={settings:{dataURL:navUserEl.getAttribute("data-userdata-url"),builderURL:navUserEl.getAttribute("data-builder-url")},init:function(){navUserHandler.localStorageExists()?navUserHandler.getMarkup(localStorage.getItem("user")).then(function(e){navUserHandler.print(e)}):$.get(navUserHandler.settings.dataURL,function(e){localStorage.setItem("user",e),navUserHandler.getMarkup(e).then(function(e){navUserHandler.print(e)})})},localStorageExists:function(){return localStorage.getItem("user")},getMarkup:function(e){var n=JSON.parse(e),r=!!navUserEl.classList.contains("nav-user--condensed"),t=!(n.businessTools.length||n.tasks.length||n.favourites.length);return new jQuery.Deferred(function(e){$.ajax({url:navUserHandler.settings.builderURL,type:"get",data:{userdata:n,notoolsflag:t,condensedflag:r},success:function(n){return e.resolve(n)}})})},print:function(e){document.querySelector(".js-nav-user").innerHTML=e;var n=document.getElementById("nav-user-slide").querySelector(".nav-user");n.innerHTML=n.innerHTML+e,document.querySelector("body").classList.add("js-nav-user-loaded")}};!function(){navUserEl&&navUserHandler.init()}(jQuery);