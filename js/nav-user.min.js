"use strict";var navUserHandler={settings:{el:"",dataURL:"",builderURL:"",mobiletoggle:!1,promise:""},init:function(e,n){navUserHandler.settings.el=e,navUserHandler.settings.dataURL=e.getAttribute("data-userdata-url"),navUserHandler.settings.builderURL=e.getAttribute("data-builder-url"),navUserHandler.settings.promise=n,navUserHandler.localStorageExists()?navUserHandler.getMarkup(localStorage.getItem("user")).then(navUserHandler.print):$.get(navUserHandler.settings.dataURL,function(e){localStorage.setItem("user",e),navUserHandler.getMarkup(e).then(navUserHandler.print)})},localStorageExists:function(){return localStorage.getItem("user")},getMarkup:function(e){var n=JSON.parse(e),t=!!navUserHandler.settings.el.classList.contains("nav-user--condensed"),r=!(n.businessTools.length||n.tasks.length||n.favourites.length),s=!!navUserHandler.settings.el.classList.contains("js-nav-user--mobile-toggle");return navUserHandler.settings.mobiletoggle=s,new jQuery.Deferred(function(e){$.ajax({url:navUserHandler.settings.builderURL,type:"get",data:{userdata:n,notoolsflag:r,condensedflag:t,mobiletoggle:s},success:function(n){return e.resolve(n)}})})},print:function(e){if(navUserHandler.settings.el.innerHTML=e,!navUserHandler.settings.mobiletoggle){var n=document.getElementById("nav-user-slide").querySelector(".nav-user");n.innerHTML=n.innerHTML+e}navUserHandler.settings.promise&&navUserHandler.settings.promise.resolve(null)}};!function(){var e=new jQuery.Deferred(function(e){navUserHandler.init(document.querySelector(".js-nav-user"),e)});e.then(function(){navUserHandler.init(document.querySelector(".js-nav-user--mobile-toggle")),document.querySelector("body").classList.add("nav-user-loaded")})}(jQuery);